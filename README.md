# fund-monitor
Claw fund lastest price and check buy or wait.

## 数据获取备注
http://hq.sinajs.cn/list=of160119
（注：只需将标黄部分改为所需要的开放式基金代码即可查询该基金的最新单位净值。）

双击后看到了什么？
var hq_str_of160119="南方中证500ETF联接(LOF),1.5548,1.6548,1.5581,-0.21,2016-09-23";

网站返回了一串字符串，其中包含了基金名称、最新单位净值、最新累计单位净值、上一期净值、日增长率、最新净值日期等元素。将字符串抓取下来后，用Excel等工具简单处理，即可获得基金最新的净值，这里从略。

## 数据操作思路

数据获取后，需要对价格进行判断：

time
 - 定时执行脚本，在晚上11点的时候，输出当天的净值（基金更新时间）
 - 判断当前日期，与上一次的买入时间进行比较

price
 - 买入的初步条件就是低于上一次买入价
 - 连续30天未买入，进行邮件提示
 - 连续60天未买入，人工择机买入/输出近60天的净值情况进行判断

## 具体判断逻辑

1. 比上一次买入价格相比，跌幅超过2.5%的进行提示；
2. 连续30天未买入且价格低于上一次买入价的时候进行提示；
3. 连续60天未买入时进行提示。

## 邮件提醒

1. 邮件内容为通用的输出全部信息；
2. 邮件标题根据触发条件的不同进行了相应的设置。

## 后续待添加

1. 进行判断的时候输出近30/60的净值浮动表；
2. 考虑增加图表渲染功能。

## 2016/09/27更新

1. 增加输出基金近500天净值波动情况表（运行脚本，打开demo.html进行查看）；
2. 图表展示使用了百度的echarts，默认显示为折线图，可以点击右上方的图标修改成柱形图；
3. 新增了另外一个数据获取接口，未进行遍历与逻辑判断，可以根据需求自行修改。
